<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="棚卸しアプリ">
    <title>棚卸しアプリ</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoi5qOf56iN44GX44Ki44OX44OqIiwic2hvcnRfbmFtZSI6IuaojOWNsuOBlyIsInN0YXJ0X3VybCI6Ii8iLCJkaXNwbGF5Ijoic3RhbmRhbG9uZSIsInRoZW1lX2NvbG9yIjoiIzIxODA4ZCIsImJhY2tncm91bmRfY29sb3IiOiIjZmNmY2Y5IiwiaWNvbnMiOlt7InNyYyI6ImRhdGE6aW1hZ2Uvc3ZnK3htbCw8c3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDI0IDI0JyBmaWxsPScjMjE4MDhkJz48cGF0aCBkPSdNMTkgM0g1Yy0xLjEgMC0yIC45LTIgMnYxNGMwIDEuMS45IDIgMiAyaDE0YzEuMSAwIDItLjkgMi0yVjVjMC0xLjEtLjktMi0yLTJ6bS01IDZoLTJ2Mmgydi0yem0wIDRoLTJ2Mmgydi0yem0tNC00aC0ydjJoMnYtMnptMCA0aC0ydjJoMnYtMnptLTQtNEg0djJoMnYtMnptMCA0SDR2Mmgydi0yem0wIDRINHYyaDJ2LTJ6bTggMGgtMnYyaDJ2LTJ6bTQgMGgtMnYyaDJ2LTJ6Jy8+PC9zdmc+Iiwic2l6ZXMiOiIxOTJ4MTkyIiwidHlwZSI6ImltYWdlL3N2Zyt4bWwifV19">
    <meta name="theme-color" content="#21808d">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2321808d'><path d='M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 6h-2v2h2v-2zm0 4h-2v2h2v-2zm-4-4h-2v2h2v-2zm0 4h-2v2h2v-2zm-4-4H4v2h2v-2zm0 4H4v2h2v-2zm0 4H4v2h2v-2zm8 0h-2v2h2v-2zm4 0h-2v2h2v-2z'/></svg>">
</head>
<body>
    <!-- ローディング画面 -->
    <div id="loading" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p>アプリを読み込み中...</p>
        </div>
    </div>

    <!-- メインメニュー -->
    <div id="main-menu" class="screen active">
        <div class="container">
            <header class="app-header">
                <h1>棚卸しアプリ</h1>
                <p class="app-subtitle">在庫管理システム</p>
            </header>
            
            <nav class="main-nav">
                <button class="btn btn--lg btn--full-width main-btn" data-screen="inventory">
                    <span class="btn-icon">📦</span>
                    <span class="btn-text">棚卸し</span>
                </button>
                
                <button class="btn btn--lg btn--full-width main-btn" data-screen="import">
                    <span class="btn-icon">📥</span>
                    <span class="btn-text">データ取り込み</span>
                </button>
                
                <button class="btn btn--lg btn--full-width main-btn" data-screen="export">
                    <span class="btn-icon">📤</span>
                    <span class="btn-text">データ出力</span>
                </button>
                
                <button class="btn btn--lg btn--full-width main-btn" data-screen="edit">
                    <span class="btn-icon">✏️</span>
                    <span class="btn-text">編集</span>
                </button>
                
                <button class="btn btn--lg btn--full-width main-btn" data-screen="settings">
                    <span class="btn-icon">⚙️</span>
                    <span class="btn-text">設定</span>
                </button>
            </nav>
        </div>
    </div>

    <!-- 棚卸し画面 -->
    <div id="inventory" class="screen">
        <div class="container">
            <header class="screen-header">
                <button class="btn btn--secondary back-btn">← 戻る</button>
                <h2>棚卸し</h2>
            </header>
            
            <div class="inventory-form">
                <!-- カメラ機能 -->
                <div class="camera-section">
                    <video id="camera-video" class="camera-view" autoplay playsinline></video>
                    <div class="camera-overlay">
                        <div class="scan-frame"></div>
                        <div class="camera-controls">
                            <button id="toggle-light" class="btn btn--secondary">💡 ライト</button>
                            <button id="switch-camera" class="btn btn--secondary">🔄 カメラ切替</button>
                        </div>
                    </div>
                    <button id="start-camera" class="btn btn--primary btn--lg btn--full-width">カメラを開始</button>
                </div>
                
                <!-- 手動入力 -->
                <div class="form-group">
                    <label class="form-label">コード入力</label>
                    <input type="text" id="product-code" class="form-control" placeholder="QRコード/JANコードを入力またはスキャン">
                </div>
                
                <!-- 商品情報表示 -->
                <div id="product-info" class="product-info hidden">
                    <div class="card">
                        <div class="card__body">
                            <h3 id="product-name">商品名</h3>
                            <p id="product-description">商品説明</p>
                        </div>
                    </div>
                </div>
                
                <!-- 数量入力 -->
                <div class="form-group">
                    <label class="form-label">数量</label>
                    <input type="number" id="quantity" class="form-control" value="1" min="1">
                </div>
                
                <!-- 単位選択 -->
                <div class="form-group">
                    <label class="form-label">単位</label>
                    <select id="unit" class="form-control">
                        <option value="個">個</option>
                        <option value="箱">箱</option>
                        <option value="甲">甲</option>
                    </select>
                </div>
                
                <!-- ロット選択 -->
                <div class="form-group">
                    <label class="form-label">ロット</label>
                    <select id="lot" class="form-control">
                        <option value="">ロットを選択</option>
                    </select>
                </div>
                
                <!-- 登録ボタン -->
                <div class="form-actions">
                    <button id="register-btn" class="btn btn--primary btn--lg btn--full-width">登録</button>
                </div>
            </div>
        </div>
    </div>

    <!-- データ取り込み画面 -->
    <div id="import" class="screen">
        <div class="container">
            <header class="screen-header">
                <button class="btn btn--secondary back-btn">← 戻る</button>
                <h2>データ取り込み</h2>
            </header>
            
            <div class="import-form">
                <div class="form-group">
                    <label class="form-label">ファイル選択</label>
                    <input type="file" id="import-file" class="form-control" accept=".xls,.xlsx,.csv">
                    <small class="form-help">Excel形式(.xls, .xlsx)またはCSV形式のファイルを選択してください</small>
                </div>
                
                <div class="form-group">
                    <label class="form-label">データ種類</label>
                    <select id="import-type" class="form-control">
                        <option value="master">商品マスタ</option>
                        <option value="stock">データ在庫</option>
                    </select>
                </div>
                
                <div id="import-progress" class="progress-section hidden">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <p class="progress-text">アップロード中...</p>
                </div>
                
                <div class="form-actions">
                    <button id="import-btn" class="btn btn--primary btn--lg btn--full-width">取り込み開始</button>
                </div>
            </div>
        </div>
    </div>

    <!-- データ出力画面 -->
    <div id="export" class="screen">
        <div class="container">
            <header class="screen-header">
                <button class="btn btn--secondary back-btn">← 戻る</button>
                <h2>データ出力</h2>
            </header>
            
            <div class="export-form">
                <div class="form-group">
                    <label class="form-label">出力形式</label>
                    <select id="export-format" class="form-control">
                        <option value="csv">CSV形式</option>
                        <option value="xlsx">Excel形式 (XLSX)</option>
                    </select>
                </div>
                
                <div class="export-preview">
                    <h3>出力データプレビュー</h3>
                    <div class="data-stats">
                        <div class="stat-item">
                            <span class="stat-label">棚卸しデータ:</span>
                            <span id="inventory-count" class="stat-value">0件</span>
                        </div>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button id="export-btn" class="btn btn--primary btn--lg btn--full-width">ダウンロード</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 編集画面 -->
    <div id="edit" class="screen">
        <div class="container">
            <header class="screen-header">
                <button class="btn btn--secondary back-btn">← 戻る</button>
                <h2>編集</h2>
            </header>
            
            <div class="edit-controls">
                <div class="form-group">
                    <input type="text" id="search-input" class="form-control" placeholder="商品名やコードで検索">
                </div>
                
                <div class="edit-actions">
                    <button id="select-all-btn" class="btn btn--secondary">全選択</button>
                    <button id="delete-selected-btn" class="btn btn--outline">選択削除</button>
                    <button id="clear-all-btn" class="btn btn--outline">全削除</button>
                </div>
            </div>
            
            <div id="inventory-list" class="inventory-list">
                <!-- データ一覧がここに表示される -->
            </div>
        </div>
    </div>

    <!-- 設定画面 -->
    <div id="settings" class="screen">
        <div class="container">
            <header class="screen-header">
                <button class="btn btn--secondary back-btn">← 戻る</button>
                <h2>設定</h2>
            </header>
            
            <div class="settings-form">
                <div class="form-group">
                    <label class="form-label">名前</label>
                    <input type="text" id="user-name" class="form-control" placeholder="名前を入力">
                </div>
                
                <div class="form-group">
                    <label class="form-label">センター名</label>
                    <select id="center-name" class="form-control">
                        <option value="東京センター">東京センター</option>
                        <option value="大阪センター">大阪センター</option>
                        <option value="名古屋センター">名古屋センター</option>
                        <option value="other">その他</option>
                    </select>
                    <input type="text" id="center-name-custom" class="form-control hidden" placeholder="センター名を入力">
                </div>
                
                <div class="form-group">
                    <label class="form-label">取り込みコード種類</label>
                    <select id="code-type" class="form-control">
                        <option value="QR">QRコード</option>
                        <option value="JAN">JANコード</option>
                        <option value="both">両方</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">出力データ形式</label>
                    <select id="output-format" class="form-control">
                        <option value="CSV">CSV</option>
                        <option value="XLSX">XLSX</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">入力データ形式</label>
                    <select id="input-format" class="form-control">
                        <option value="XLSX">XLSX</option>
                        <option value="CSV">CSV</option>
                    </select>
                </div>
                
                <div class="form-actions">
                    <button id="save-settings-btn" class="btn btn--primary btn--lg btn--full-width">設定を保存</button>
                    <button id="clear-data-btn" class="btn btn--outline btn--lg btn--full-width">データオールクリア</button>
                </div>
            </div>
        </div>
    </div>

    <!-- メッセージ表示 -->
    <div id="message" class="message hidden">
        <div class="message-content">
            <span id="message-text"></span>
        </div>
    </div>

    <!-- 確認ダイアログ -->
    <div id="confirm-dialog" class="dialog hidden">
        <div class="dialog-content">
            <h3 id="confirm-title">確認</h3>
            <p id="confirm-message">この操作を実行しますか？</p>
            <div class="dialog-actions">
                <button id="confirm-cancel" class="btn btn--secondary">キャンセル</button>
                <button id="confirm-ok" class="btn btn--primary">OK</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
